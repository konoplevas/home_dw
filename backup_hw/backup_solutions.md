## Задание 1. Резервное копирование

### 1.1. Восстановление данных в полном объёме за предыдущий день
**Решение**: Полное резервное копирование ежедневно.
- Выполнять full-backup каждые 24 часа (например, в 02:00 ночи)
- Хранить несколько последних полных копий для возможности отката

### 1.2. Восстановление данных за час до предполагаемой поломки
**Решение**: Комбинация полного и инкрементного копирования.
- Полный бэкап: раз в сутки в 00:00
- Инкрементные бэкапы: каждые 2 часа
- Это позволяет восстановить данные с потерей не более 1-2 часов

### 1.3. Моментальное переключение при поломке базы
**Да, возможно** через:
- Синхронную репликацию в реальном времени
- Автоматический failover с использованием кластерных решений
- Пример: PostgreSQL с потоковой репликацией + Patroni для управления кластером

## Задание 2. PostgreSQL

### 2.1. Команды резервирования и восстановления

Резервирование (pg_dump):
bash
pg_dump -U username -h host -F c -b -v -f backup.dump dbname

Восстановление (pg_restore):
bash
pg_restore -U username -h host -v -d dbname backup.dump

2.1.* Автоматизация процесса

Да, возможно через планировщик cron:
bash
0 2 * * * pg_dump -U user -F c -f /backups/db_$(date +\%Y\%m\%d).dump dbname
Специализированные инструменты: Barman, pgBackRest. Скрипты для ротации бэкапов и уведомлений

Задание 3. MySQL

3.1. Инкрементное резервное копирование

Активация бинарных логов в my.cnf:
ini
log_bin = /var/log/mysql/mysql-bin.log

Полный бэкап:
bash
mysqldump -u root -p --flush-logs --master-data=2 dbname > full_backup.sql

Инкрементный бэкап:
bash
mysqladmin -u root -p flush-logs
cp /var/log/mysql/mysql-bin.00000* /backup/incremental/

Восстановление:
bash
# Восстановление полного бэкапа
mysql -u root -p < full_backup.sql

# Применение инкрементных изменений
mysqlbinlog mysql-bin.000001 | mysql -u root -p

3.1.* Преимущества реплики
Минимальный downtime: Быстрое переключение на реплику

Распределение нагрузки: Чтение можно перенести на реплики

Тестирование: Безопасное тестирование на реплике

Геораспределенность: Увеличение отказоустойчивости

Резервное копирование без нагрузки: Бэкапы делать с реплики
